# 赛博黑客终端动画设计

> 重新定义命令终端体验，让用户感觉像真正的黑客

## 已实现功能

### 1. MatrixDecode 动画组件
- **位置**: `src/components/cards/ModelCard.tsx`
- **效果**: 日文片假名字符快速滚动，依次锁定显示目标文字
- **应用场景**:
  - `$ ping --all` 时 ModelCard 的 LATENCY 区域
  - Agent Worker 的 `APPLY CHANGES` 按钮

### 2. 动画参数
```tsx
// 字符集: 日文片假名 + 数字
const MATRIX_CHARS = 'ｱｲｳｴｵｶｷｸｹｺｻｼｽｾｿﾀﾁﾂﾃﾄ...0123456789';
const TARGET_TEXT = 'WHICHCLAW';

// 时间参数
- 字符滚动间隔: 80ms
- 锁定起始延迟: 300ms  
- 每个字符锁定间隔: 200ms
```

### 3. 视觉效果
- 绿色荧光 (text-green-500)
- 发光阴影 (text-shadow: 0 0 8px rgba(0, 255, 136, 0.8))
- 字符间距 (gap-[2px])
- 锁定后变青色 (text-cyber-accent)

---

## 未来规划

### 终端安装动画
模拟 npm/pip 安装过程，融入赛博黑客元素：

```
> npm install @anthropic-ai/claude-code

[INIT] Establishing secure connection...
[SCAN] ｱｲｳｴｵ → Resolving dependencies...
[████████░░░░░░░░░░░░] 42%

  ┌─────────────────────────────────────┐
  │  PACKAGE: claude-code@2.1.5        │
  │  STATUS:  ▓▓▓▓▓▓▓▓░░ DECODING...   │
  └─────────────────────────────────────┘

[OK] Dependencies resolved: 127 packages
[INSTALLING] node_modules/anthropic-sdk...
[████████████████████] 100%

[DONE] claude-code ready. Welcome to the Matrix! 🚀
```

### 实现要点

1. **后端**
   - 执行真实命令 (npm install, pip install 等)
   - 捕获 stdout/stderr 实时流
   - 通过 IPC 推送到前端

2. **前端**
   - 打字机效果逐字显示
   - Matrix 字符预热动画
   - 进度条 + 百分比
   - 状态标签 [INIT] [SCAN] [OK] [FAIL]

3. **混合模式**
   - 真实命令输出 + 装饰性动画
   - 保留原始日志可查看
   - 错误高亮 (红色)

### 可复用组件

```tsx
// 终端输出行组件
<TerminalLine type="init">Connecting to registry...</TerminalLine>
<TerminalLine type="progress" percent={42} />
<TerminalLine type="success">Package installed</TerminalLine>
<TerminalLine type="error">Connection failed</TerminalLine>
<TerminalLine type="matrix">DECODING...</TerminalLine>
```

---

## Logs & Debug 页面重构

### 布局设计
```
┌─────────────────────────────────────────────────────────────┐
│  LOGS & DEBUG                                               │
├──────────────────────────────┬──────────────────────────────┤
│                              │                              │
│   终端输出区 (左侧)           │   用户输入区 (右侧)           │
│                              │                              │
│   > npm install claude-code  │  ┌────────────────────────┐ │
│   [INIT] Connecting...       │  │ 输入命令或问题...       │ │
│   [████████░░░░] 42%         │  └────────────────────────┘ │
│   [OK] Installed!            │                              │
│                              │  [快捷命令]                  │
│                              │  • 安装 Claude Code          │
│                              │  • 安装 OpenClaw             │
│                              │  • 检测已安装工具            │
│                              │                              │
└──────────────────────────────┴──────────────────────────────┘
```

### AI 助手功能

**定位**: 帮助新手用户安装和配置 AI 开发工具

**核心能力**:
1. **智能问答** - 回答 "怎么安装 Claude Code?" 类问题
2. **命令生成** - 根据用户需求生成安装命令
3. **故障诊断** - 分析错误日志，给出解决建议
4. **配置引导** - 一步步引导用户完成配置

**技术方案**:
- 移植 OpenClaw 的网络访问和对话能力
- 本地 AI 模型调用 (可选用 WhichClaw 配置的模型)
- 预设常见问题模板

### 命令执行流程

```
用户输入: "帮我安装 Claude Code"
    ↓
AI 生成命令: npm install -g @anthropic-ai/claude-code
    ↓
用户确认执行
    ↓
后端执行命令 (child_process)
    ↓
实时输出 + 赛博动画效果
    ↓
安装完成 → 自动扫描更新工具列表
```

---

## 参考资源

- [Rezmason/matrix](https://github.com/Rezmason/matrix) - Web 版 Matrix 数字雨
- Matrix 电影字符集: 日文片假名 + Chicago 字体符号
- OpenClaw 网络访问能力代码
